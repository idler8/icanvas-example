!function(){"use strict";var t=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}},e=Object.prototype.toString;function n(t){return"[object Array]"===e.call(t)}function i(t){return void 0===t}function r(t){return null!==t&&"object"==typeof t}function s(t){return"[object Function]"===e.call(t)}function o(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),n(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}var a={isArray:n,isArrayBuffer:function(t){return"[object ArrayBuffer]"===e.call(t)},isBuffer:function(t){return null!==t&&!i(t)&&null!==t.constructor&&!i(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:r,isUndefined:i,isDate:function(t){return"[object Date]"===e.call(t)},isFile:function(t){return"[object File]"===e.call(t)},isBlob:function(t){return"[object Blob]"===e.call(t)},isFunction:s,isStream:function(t){return r(t)&&s(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:o,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,r=arguments.length;i<r;i++)o(arguments[i],n);return e},deepMerge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]="object"==typeof n?t({},n):n}for(var i=0,r=arguments.length;i<r;i++)o(arguments[i],n);return e},extend:function(e,n,i){return o(n,(function(n,r){e[r]=i&&"function"==typeof n?t(n,i):n})),e},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function u(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var h=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(a.isURLSearchParams(e))i=e.toString();else{var r=[];a.forEach(e,(function(t,e){null!=t&&(a.isArray(t)?e+="[]":t=[t],a.forEach(t,(function(t){a.isDate(t)?t=t.toISOString():a.isObject(t)&&(t=JSON.stringify(t)),r.push(u(e)+"="+u(t))})))})),i=r.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t};function l(){this.handlers=[]}l.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},l.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},l.prototype.forEach=function(t){a.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var c=l,f=function(t,e,n){return a.forEach(n,(function(n){t=n(t,e)})),t},d=function(t){return!(!t||!t.__CANCEL__)},p=function(t,e){a.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))},v=function(t,e,n,i,r){return function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,i,r)},g=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],y=a.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=a.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},m=a.isStandardBrowserEnv()?{write:function(t,e,n,i,r,s){var o=[];o.push(t+"="+encodeURIComponent(e)),a.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),a.isString(i)&&o.push("path="+i),a.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},x=function(t){return new Promise((function(e,n){var i=t.data,r=t.headers;a.isFormData(i)&&delete r["Content-Type"];var s=new XMLHttpRequest;if(t.auth){var o=t.auth.username||"",u=t.auth.password||"";r.Authorization="Basic "+btoa(o+":"+u)}var l,c,f=(l=t.baseURL,c=t.url,l&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(l,c):c);if(s.open(t.method.toUpperCase(),h(f,t.params,t.paramsSerializer),!0),s.timeout=t.timeout,s.onreadystatechange=function(){if(s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var i,r,o,u,h,l="getAllResponseHeaders"in s?(i=s.getAllResponseHeaders(),h={},i?(a.forEach(i.split("\n"),(function(t){if(u=t.indexOf(":"),r=a.trim(t.substr(0,u)).toLowerCase(),o=a.trim(t.substr(u+1)),r){if(h[r]&&g.indexOf(r)>=0)return;h[r]="set-cookie"===r?(h[r]?h[r]:[]).concat([o]):h[r]?h[r]+", "+o:o}})),h):h):null,c={data:t.responseType&&"text"!==t.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:l,config:t,request:s};!function(t,e,n){var i=n.config.validateStatus;!i||i(n.status)?t(n):e(v("Request failed with status code "+n.status,n.config,null,n.request,n))}(e,n,c),s=null}},s.onabort=function(){s&&(n(v("Request aborted",t,"ECONNABORTED",s)),s=null)},s.onerror=function(){n(v("Network Error",t,null,s)),s=null},s.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(v(e,t,"ECONNABORTED",s)),s=null},a.isStandardBrowserEnv()){var d=m,p=(t.withCredentials||y(f))&&t.xsrfCookieName?d.read(t.xsrfCookieName):void 0;p&&(r[t.xsrfHeaderName]=p)}if("setRequestHeader"in s&&a.forEach(r,(function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete r[e]:s.setRequestHeader(e,t)})),a.isUndefined(t.withCredentials)||(s.withCredentials=!!t.withCredentials),t.responseType)try{s.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&s.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){s&&(s.abort(),n(t),s=null)})),void 0===i&&(i=null),s.send(i)}))},k={"Content-Type":"application/x-www-form-urlencoded"};function w(t,e){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var b,S={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(b=x),b),transformRequest:[function(t,e){return p(e,"Accept"),p(e,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(w(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)?(w(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};S.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(t){S.headers[t]={}})),a.forEach(["post","put","patch"],(function(t){S.headers[t]=a.merge(k)}));var T=S;function _(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var A=function(t){return _(t),t.headers=t.headers||{},t.data=f(t.data,t.headers,t.transformRequest),t.headers=a.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),a.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||T.adapter)(t).then((function(e){return _(t),e.data=f(e.data,e.headers,t.transformResponse),e}),(function(e){return d(e)||(_(t),e&&e.response&&(e.response.data=f(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},E=function(t,e){e=e||{};var n={},i=["url","method","params","data"],r=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];a.forEach(i,(function(t){void 0!==e[t]&&(n[t]=e[t])})),a.forEach(r,(function(i){a.isObject(e[i])?n[i]=a.deepMerge(t[i],e[i]):void 0!==e[i]?n[i]=e[i]:a.isObject(t[i])?n[i]=a.deepMerge(t[i]):void 0!==t[i]&&(n[i]=t[i])})),a.forEach(s,(function(i){void 0!==e[i]?n[i]=e[i]:void 0!==t[i]&&(n[i]=t[i])}));var o=i.concat(r).concat(s),u=Object.keys(e).filter((function(t){return-1===o.indexOf(t)}));return a.forEach(u,(function(i){void 0!==e[i]?n[i]=e[i]:void 0!==t[i]&&(n[i]=t[i])})),n};function C(t){this.defaults=t,this.interceptors={request:new c,response:new c}}C.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=E(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[A,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},C.prototype.getUri=function(t){return t=E(this.defaults,t),h(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],(function(t){C.prototype[t]=function(e,n){return this.request(a.merge(n||{},{method:t,url:e}))}})),a.forEach(["post","put","patch"],(function(t){C.prototype[t]=function(e,n,i){return this.request(a.merge(i||{},{method:t,url:e,data:n}))}}));var M=C;function R(t){this.message=t}R.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},R.prototype.__CANCEL__=!0;var P=R;function D(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new P(t),e(n.reason))}))}D.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},D.source=function(){var t;return{token:new D((function(e){t=e})),cancel:t}};var O=D;function U(e){var n=new M(e),i=t(M.prototype.request,n);return a.extend(i,M.prototype,n),a.extend(i,n),i}var j=U(T);j.Axios=M,j.create=function(t){return U(E(j.defaults,t))},j.Cancel=P,j.CancelToken=O,j.isCancel=d,j.all=function(t){return Promise.all(t)},j.spread=function(t){return function(e){return t.apply(null,e)}};var I=j,B=j;I.default=B;var z=I;var N=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var F=function(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),t};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function H(t,e){return t(e={exports:{}},e.exports),e.exports}var X=H((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));var W=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Y=function(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?W(t):e},V=H((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e})),q=H((function(t){function e(n,i){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e}));var G=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)};var J=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V(t)););return t},K=H((function(t){function e(n,i,r){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,n){var i=J(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}},e(n,i,r||n)}t.exports=e})),$=H((function(t){function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function n(i,r,s){return e()?t.exports=n=Reflect.construct:t.exports=n=function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&q(r,n.prototype),r},n.apply(null,arguments)}t.exports=n}));var Q=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}};var Z=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var tt=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var et=function(t){return Q(t)||Z(t)||tt()},nt=function(){function t(){if(N(this,t),this.elements=[],arguments.length)for(var e=0;e<arguments.length;e++)this.elements[e]=arguments[e]}return F(t,[{key:"length",get:function(){return this.elements?this.elements.length:0}}]),F(t,[{key:"same",value:function(t){for(var e=0;e<this.length;e++)this.elements[e]=t;return this}},{key:"typeTo",value:function(t){return this.elements=new t(this.elements),this}},{key:"normalize",value:function(){for(var t=0,e=0,n=this.length;e<n;e++)t+=this.elements[e]*this.elements[e];if(!(t=Math.sqrt(t)))return this.same(0);if(1==t)return this;for(var i=0;i<this.length;i++)this.elements[i]/=t;return this}},{key:"set",value:function(){if(!arguments.length)return this;for(var t=0;t<arguments.length;t++)this.elements[t]=arguments[t];return this}},{key:"setApply",value:function(t){return t===this?this:this.set.apply(this,t.elements||t)}},{key:"clone",value:function(){return(new this.constructor).setApply(this)}},{key:"equals",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&this.length!=t.length)return!1;for(var n=e?this.length:Math.min(this.length,t.length),i=0;i<n;i++)if(this[i]!=t[i])return!1;return!0}},{key:"equalsApply",value:function(){return this.equals(arguments)}},{key:"add",value:function(){if(!arguments.length)return this;for(var t=0;t<arguments.length;t++)this.elements[t]+=arguments[t];return this}},{key:"addApply",value:function(t){return this.add.apply(this,t.elements||t)}},{key:"sub",value:function(){if(!arguments.length)return this;for(var t=0;t<arguments.length;t++)this.elements[t]-=arguments[t];return this}},{key:"subApply",value:function(t){return this.sub.apply(this,t.elements||t)}},{key:"mult",value:function(){if(!arguments.length)return this;for(var t=0;t<arguments.length;t++)this.elements[t]*=arguments[t];return this}},{key:"multApply",value:function(t){return this.mult.apply(this,t.elements||t)}},{key:"div",value:function(){if(!arguments.length)return this;for(var t=0;t<arguments.length;t++)this.elements[t]/=arguments[t];return this}},{key:"divApply",value:function(t){return this.div.apply(this,t.elements||t)}}]),t}(),it=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return N(this,e),Y(this,V(e).call(this,t,n))}return G(e,t),F(e,[{key:"rotate",value:function(t){var e=Math.sin(t),n=Math.cos(t),i=n*this.x-e*this.y;return this.y=e*this.x+n*this.y,this.x=i,this}},{key:"dist",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.x-t,i=this.y-e;return Math.sqrt(n*n+i*i)}},{key:"distVector",value:function(t){return this.dist(t.x,t.y)}},{key:"angle",value:function(t){var e=this.dist()*t.dist(),n=this.x*t.x+this.y*t.y;return Math.acos(n/e)}},{key:"inPolygon",value:function(t){if(arguments.length>1&&(t=arguments),t.length<3)return!1;for(var e=!1,n=0,i=t.length-1;n<t.length;i=n++){var r=t[n].x,s=t[n].y,o=t[i].x,a=t[i].y,u=s>this.y!=a>this.y&&this.x<(o-r)*(this.y-s)/(a-s)+r;u&&(e=!e)}return e}},{key:"multiplyMatrix4",value:function(t){var e=t.elements,n=this.elements,i=1/(e[3]*n[0]+e[7]*n[1]+e[15]);return this.set((e[0]*n[0]+e[4]*n[1]+e[12])*i,(e[1]*n[0]+e[5]*n[1]+e[13])*i)}},{key:"x",get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},{key:"y",get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}}]),e}(nt),rt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return N(this,e),Y(this,V(e).call(this,t,n,i))}return G(e,t),F(e,[{key:"dist",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.x-t,r=this.y-e,s=this.z-n;return Math.sqrt(i*i+r*r+s*s)}},{key:"distVector",value:function(t){return this.dist(t.x,t.y,t.z)}},{key:"angle",value:function(t){var e=this.dist()*t.dist(),n=this.x*t.x+this.y*t.y+this.z*t.z;return Math.acos(n/e)}},{key:"multiplyMatrix4",value:function(t){var e=this.elements,n=t.elements,i=1/(n[3]*e[0]+n[7]*e[1]+n[11]*e[2]+n[15]);return this.set((n[0]*e[0]+n[4]*e[1]+n[8]*e[2]+n[12])*i,(n[1]*e[0]+n[5]*e[1]+n[9]*e[2]+n[13])*i,(n[2]*e[0]+n[6]*e[1]+n[10]*e[2]+n[14])*i)}},{key:"x",get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},{key:"y",get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}},{key:"z",get:function(){return this.elements[2]},set:function(t){this.elements[2]=t}}]),e}(nt),st=function(t){function e(t){var n;return N(this,e),n=Y(this,V(e).call(this,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),t&&n.setApply(t),n}return G(e,t),F(e,[{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}},{key:"multiply",value:function(t){var e,n,i,r,s,o,a,u;if(n=this.elements,i=this.elements,n===(r=t.elements))for(r=new Float32Array(16),e=0;e<16;++e)r[e]=n[e];for(e=0;e<4;e++)s=i[e],o=i[e+4],a=i[e+8],u=i[e+12],n[e]=s*r[0]+o*r[1]+a*r[2]+u*r[3],n[e+4]=s*r[4]+o*r[5]+a*r[6]+u*r[7],n[e+8]=s*r[8]+o*r[9]+a*r[10]+u*r[11],n[e+12]=s*r[12]+o*r[13]+a*r[14]+u*r[15];return this}},{key:"multiplyVector3",value:function(t){var e=this.elements,n=t.elements,i=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+e[12],r=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+e[13],s=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+e[14];return t.x=i,t.y=r,t.z=s,t}},{key:"transpose",value:function(){var t=this.elements;return this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])}},{key:"invert",value:function(t){var n,i,r,s,o;if(i=t?t.elements||t:this.elements,r=this.elements,(s=e.invertHandle||(e.invertHandle=[]))[0]=i[5]*i[10]*i[15]-i[5]*i[11]*i[14]-i[9]*i[6]*i[15]+i[9]*i[7]*i[14]+i[13]*i[6]*i[11]-i[13]*i[7]*i[10],s[4]=-i[4]*i[10]*i[15]+i[4]*i[11]*i[14]+i[8]*i[6]*i[15]-i[8]*i[7]*i[14]-i[12]*i[6]*i[11]+i[12]*i[7]*i[10],s[8]=i[4]*i[9]*i[15]-i[4]*i[11]*i[13]-i[8]*i[5]*i[15]+i[8]*i[7]*i[13]+i[12]*i[5]*i[11]-i[12]*i[7]*i[9],s[12]=-i[4]*i[9]*i[14]+i[4]*i[10]*i[13]+i[8]*i[5]*i[14]-i[8]*i[6]*i[13]-i[12]*i[5]*i[10]+i[12]*i[6]*i[9],s[1]=-i[1]*i[10]*i[15]+i[1]*i[11]*i[14]+i[9]*i[2]*i[15]-i[9]*i[3]*i[14]-i[13]*i[2]*i[11]+i[13]*i[3]*i[10],s[5]=i[0]*i[10]*i[15]-i[0]*i[11]*i[14]-i[8]*i[2]*i[15]+i[8]*i[3]*i[14]+i[12]*i[2]*i[11]-i[12]*i[3]*i[10],s[9]=-i[0]*i[9]*i[15]+i[0]*i[11]*i[13]+i[8]*i[1]*i[15]-i[8]*i[3]*i[13]-i[12]*i[1]*i[11]+i[12]*i[3]*i[9],s[13]=i[0]*i[9]*i[14]-i[0]*i[10]*i[13]-i[8]*i[1]*i[14]+i[8]*i[2]*i[13]+i[12]*i[1]*i[10]-i[12]*i[2]*i[9],s[2]=i[1]*i[6]*i[15]-i[1]*i[7]*i[14]-i[5]*i[2]*i[15]+i[5]*i[3]*i[14]+i[13]*i[2]*i[7]-i[13]*i[3]*i[6],s[6]=-i[0]*i[6]*i[15]+i[0]*i[7]*i[14]+i[4]*i[2]*i[15]-i[4]*i[3]*i[14]-i[12]*i[2]*i[7]+i[12]*i[3]*i[6],s[10]=i[0]*i[5]*i[15]-i[0]*i[7]*i[13]-i[4]*i[1]*i[15]+i[4]*i[3]*i[13]+i[12]*i[1]*i[7]-i[12]*i[3]*i[5],s[14]=-i[0]*i[5]*i[14]+i[0]*i[6]*i[13]+i[4]*i[1]*i[14]-i[4]*i[2]*i[13]-i[12]*i[1]*i[6]+i[12]*i[2]*i[5],s[3]=-i[1]*i[6]*i[11]+i[1]*i[7]*i[10]+i[5]*i[2]*i[11]-i[5]*i[3]*i[10]-i[9]*i[2]*i[7]+i[9]*i[3]*i[6],s[7]=i[0]*i[6]*i[11]-i[0]*i[7]*i[10]-i[4]*i[2]*i[11]+i[4]*i[3]*i[10]+i[8]*i[2]*i[7]-i[8]*i[3]*i[6],s[11]=-i[0]*i[5]*i[11]+i[0]*i[7]*i[9]+i[4]*i[1]*i[11]-i[4]*i[3]*i[9]-i[8]*i[1]*i[7]+i[8]*i[3]*i[5],s[15]=i[0]*i[5]*i[10]-i[0]*i[6]*i[9]-i[4]*i[1]*i[10]+i[4]*i[2]*i[9]+i[8]*i[1]*i[6]-i[8]*i[2]*i[5],0===(o=i[0]*s[0]+i[1]*s[4]+i[2]*s[8]+i[3]*s[12]))return this;for(o=1/o,n=0;n<16;n++)r[n]=s[n]*o;return this}},{key:"setOrtho",value:function(t,e,n,i,r,s){var o,a,u,h;if(t===e||n===i||r===s)throw"null frustum";return a=1/(e-t),u=1/(i-n),h=1/(s-r),(o=this.elements)[0]=2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2*h,o[11]=0,o[12]=-(e+t)*a,o[13]=-(i+n)*u,o[14]=-(s+r)*h,o[15]=1,this}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1)}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.mult(t,t,t,t,e,e,e,e,n,n,n,n)}},{key:"setTranslate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.set(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1)}},{key:"translate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*n,i[13]+=i[1]*t+i[5]*e+i[9]*n,i[14]+=i[2]*t+i[6]*e+i[10]*n,i[15]+=i[3]*t+i[7]*e+i[11]*n,this}},{key:"setRotate",value:function(t,e,n,i){var r,s,o,a,u,h,l,c,f,d,p;return this.elements,r=Math.sin(t),s=Math.cos(t),0!==e&&0===n&&0===i?(e<0&&(r=-r),this.set(1,0,0,0,0,s,-r,0,0,r,s,0,0,0,0,1)):0===e&&0!==n&&0===i?(n<0&&(r=-r),this.set(s,0,-r,0,0,1,0,0,r,0,s,0,0,0,0,1)):0===e&&0===n&&0!==i?(i<0&&(r=-r),this.set(s,r,0,0,-r,s,0,0,0,0,1,0,0,0,0,1)):(1!==(o=Math.sqrt(e*e+n*n+i*i))&&(e*=a=1/o,n*=a,i*=a),u=1-s,h=e*n,l=n*i,c=i*e,f=e*r,d=n*r,p=i*r,this.set(e*e*u+s,h*u+p,c*u-d,0,h*u-p,n*n*u+s,l*u+f,0,c*u+d,l*u-f,i*i*u+s,0,0,0,0,1))}},{key:"rotate",value:function(t,n,i,r){return this.multiply((new e).setRotate(t,n,i,r))}}]),e}(nt);function ot(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function at(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var ut=function(t){function e(t){var n;return N(this,e),n=Y(this,V(e).call(this,1,1,1,1)),void 0!==t&&n.setApply(arguments.length>1?arguments:t),n}return G(e,t),F(e,[{key:"setApply",value:function(t){return"string"==typeof t?this.string=t:"number"==typeof t?this.number=t:K(V(e.prototype),"setApply",this).call(this,t),this}},{key:"number",set:function(t){ot(t,this.elements)},get:function(){return at(this.elements)}},{key:"string",set:function(t){var e;ot(("string"==typeof(e=t)&&"#"===e[0]&&(e=e.substr(1)),parseInt(e,16)),this.elements)},get:function(){return t=(t=at(this.elements)).toString(16),t="000000".substr(0,6-t.length)+t,"#".concat(t);var t}},{key:"red",get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},{key:"green",get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}},{key:"blue",get:function(){return this.elements[2]},set:function(t){this.elements[2]=t}},{key:"alpha",get:function(){return this.elements[3]},set:function(t){this.elements[3]=t}}]),e}(nt);var ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Math.random()*t|0)+e};ht.To=function(t,e){return ht(e-t,t)},(ht.Array=function(t){return t[ht(t.length)]}).Keys=ht.Keys=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t||!e)return[];for(var n=[],i=Object.keys(t);i.length>0&&n.length<e;)n.push(i.splice(ht(i.length),1)[0]);return n},ht.Array.Values=ht.Values=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t||!e)return[];for(var n=[],i=Object.keys(t);i.length>0&&n.length<e;){var r=i.splice(ht(i.length),1)[0];n.push(t[r])}return n};var lt=function(){function t(){N(this,t),this.TouchHandle=new rt}return F(t,[{key:"InComponent",value:function(t,e){return!!t.visible&&(!t.checkPoint||(this.TouchHandle.setApply(e),!!t.checkPoint(this.TouchHandle)||void 0))}},{key:"Recursive",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touchTap";if(!t)return!1;if(!(t instanceof Array)){if(!t.visible)return!1;if(t.touchChildren&&t.children.length){var i=this.Recursive(t.children,e,n);if(i)return i}if(!this.InComponent(t,e))return!1;if(!t[n])return t.touchStop;var r=t[n](this.TouchHandle);return void 0===r||r}for(var s=t.length-1;s>=0;s--){var o=this.Recursive(t[s],e,n);if(o)return o}}}]),t}(),ct=function(){function t(){N(this,t),this._events={}}return F(t,[{key:"listen",value:function(){for(var t=0;t<arguments.length;t++)this.on(arguments[t]);return this}},{key:"on",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n||(n=this),e||(e=n[t]),e?(this._events[t]||(this._events[t]=[]),this._events[t].push({fn:e,context:n,once:i}),this):this}},{key:"once",value:function(t,e,n){return this.on(t,e,n,!0)}},{key:"off",value:function(t,e,n){if(!this._events[t])return this;n||(n=this);var i=this._events[t].filter((function(t){return t.context!==n&&t.fn!==e}));return i.length?this._events[t]=i:delete this._events[t],this}},{key:"emit",value:function(t){if(!this._events[t])return this;for(var e=this._events[t],n=Array.prototype.splice.call(arguments,1),i=0;i<e.length;i++){var r=e[i],s=r.fn,o=r.context,a=r.once;s.apply(o,n),a&&e.splice(i--,1)}return e.length||delete this._events[t],this}}]),t}(),ft=function(t){function e(t,n,i,r){var s;return N(this,e),(s=Y(this,V(e).call(this,i,r))).start=new it(i,r),s.step=new it(0,0),s.begin=s.over=n,s.id=t,s}return G(e,t),F(e,[{key:"set",value:function(t,n){return this.step.set(t-this.x,n-this.y),K(V(e.prototype),"set",this).call(this,t,n)}},{key:"long",get:function(){return this.over-this.begin}},{key:"startX",get:function(){return this.start.x}},{key:"startY",get:function(){return this.start.y}},{key:"endX",get:function(){return this.x}},{key:"endY",get:function(){return this.y}},{key:"moveX",get:function(){return this.x-this.start.x}},{key:"moveY",get:function(){return this.y-this.start.y}},{key:"distance",get:function(){return this.distVector(this.start)}}]),e}(it),dt=function(t){function e(){var t;return N(this,e),(t=Y(this,V(e).call(this))).size=new it,t.offset=new it,t.touches={},t}return G(e,t),F(e,[{key:"getX",value:function(t){return(t-this.offset.x)*this.size.x}},{key:"getY",value:function(t){return(t-this.offset.y)*this.size.y}},{key:"start",value:function(t){for(var e=Date.now(),n=0,i=t.changedTouches.length;n<i;n++){var r=t.changedTouches[n],s=r.identifier;this.touches[s]=new ft(s,e,this.getX(r.clientX),this.getY(r.clientY)),this.emit("touchStart",this.touches[s])}return this}},{key:"move",value:function(t){for(var e=0,n=t.changedTouches.length;e<n;e++){var i=t.changedTouches[e],r=i.identifier;this.touches[r]&&(this.touches[r].set(this.getX(i.clientX),this.getY(i.clientY)),this.emit("touchMove",this.touches[r]))}return this}},{key:"end",value:function(t){for(var e=Date.now(),n=0,i=t.changedTouches.length;n<i;n++){var r=t.changedTouches[n],s=r.identifier;this.touches[s]&&(this.touches[s].over=e,this.touches[s].set(this.getX(r.clientX),this.getY(r.clientY),e),this.emit("touchEnd",this.touches[s]),delete this.touches[s])}return this}}]),e}(ct),pt=function(t){function e(){var t;return N(this,e),(t=Y(this,V(e).call(this))).time=t.then=t.history=Date.now(),t.interval=1e3/60,t.tick=t.move=0,t}return G(e,t),F(e,[{key:"step",value:function(){this.time=Date.now();var t=this.time-this.then;if(t<this.interval)return!1;this.tick=t/this.interval|0;var e=t%this.interval;return this.then=this.time-e,this.move=this.time-this.history,this.history=this.time,!0}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3/60;this.interval=t;var e=this,n=function t(){requestAnimationFrame(t),e.step()&&e.emit("tick")};return requestAnimationFrame(n),this}}]),e}(ct),vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;N(this,t),this.collect=[],this.used=[],this.running=!1,this.interval=e,this.stepid=0}return F(t,[{key:"add",value:function(t){t.destroy&&this.collect.push(t)}},{key:"use",value:function(t){this.running&&this.used.push(t)}},{key:"dispose",value:function(){var t=this,e=arguments;this.running&&(this.collect.forEach((function(n){-1===t.used.indexOf(n)&&n.destroy.apply(n,e)})),this.collect=[].concat(this.used),this.used.length=0,this.running=!1)}},{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.stepid+=t,this.stepid<=this.interval||(this.stepid=0,this.running=!0)}}]),t}(),gt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,t),this.context=e,this.duration=0,this.timing=[],this.repeat=n.repeat||0,this.speed=n.scale||1,this.runtime={},this.currentTime=0,this.stepTime=0,this.paused=n.paused||!1}return F(t,[{key:"clone",value:function(t){return new this.constructor(t,this).set(this.timing)}},{key:"set",value:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.set(t[e]);else{var n=t.duration||0;t.to?this.to(t.to,n,t.position):n&&this.wait(n,t.position),this.call(t.call,n+t.position)}return this}},{key:"add",value:function(t,e){var n=this.duration,i=n+t,r={start:n,duration:t,end:i};return this.timing.push(r),this.duration=Math.max(this.duration,i),r}},{key:"to",value:function(t,e,n){return this.add(e,n).to=t,this}},{key:"wait",value:function(t,e){return this.add(t,e),this}},{key:"call",value:function(t,e){return this.add(0,e).call=t,this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.context?(this.currentTime=Date.now()-t,this.stepTime=0,this.paused=!1,this):this}},{key:"pause",value:function(t){return this.paused=t,this}},{key:"scale",value:function(t){return void 0===t?this.speed:(this.speed=t,this)}},{key:"step",value:function(t){if(this.currentTime){t||(t=Date.now());var e=t-this.currentTime;if(this.currentTime=t,!this.paused){for(var n=this.stepTime,i=n+e*this.speed,r=0;r<this.timing.length;r++){var s=this.timing[r],o=s.start,a=s.duration,u=s.end,h=s.call,l=s.to;if(h&&o>n&&o<=i&&("string"==typeof h?this.context[h]&&this.context[h]():"function"==typeof h&&h.call(this.context)),l)if(u>n&&u<=i)for(var c in l)this.context[c]=l[c];else{if(o>=n&&o<i)for(var f in l)this.runtime[f]=this.context[f];if(i>o&&i<u){var d=(i-o)/a;for(var p in l)this.context[p]=(l[p]-this.runtime[p])*d}}}i>=this.duration?this.repeat?this.play(i-this.duration):this.pause():this.stepTime=i}}}}]),t}(),yt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N(this,e),(t=Y(this,V(e).call(this))).id=e.id?++e.id:e.id=1,t.parent=null,t.children=[],t.touchChildren=!0,t.visible=!(!1===n.visible),t.color=n.color||new ut(n.red||1,n.green||1,n.blue||1,n.alpha||1),t.opacity=n.opacity||1,t.zIndex=n.zIndex||0,t.transformParentId=0,t.transformId=1,t.needUpdateTransform=!0,t.matrix=new st,t.position=new it(n.x||0,n.y||0),t.scale=new it(n.scaleX||1,n.scaleY||1),t.angle=n.angle||0,n.radian&&(t.radian=n.radian),t.on("destroy",(function(){for(var t=0;t<this.children.length;t++)this.children[t].emit("destroy")})),t}return G(e,t),F(e,[{key:"updateTransform",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.parent){if(t&&this.parent.updateTransform(t),!this.needUpdateTransform&&this.transformParentId==this.parent.transformId)return;this.matrix.setApply(this.parent.matrix)}else{if(!this.needUpdateTransform)return;this.matrix.identity()}this.matrix.translate(this.x,this.y,0),this.matrix.rotate(this.radian,0,0,1),this.matrix.scale(this.scaleX,this.scaleY,1),this.needUpdateTransform=!1,this.transformId++,this.transformParentId=this.parent?this.parent.transformId:0}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScale",value:function(t,e){return this.scaleX=t,this.scaleY=e,this}},{key:"setRadian",value:function(t){return this.radian=t,this}},{key:"setAngle",value:function(t){return this.angle=t,this}},{key:"getWorldVector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(t=e?t.clone():t).multiplyMatrix4(this.matrix)}},{key:"put",value:function(t){return this.parent&&this.parent.remove(this),t?(this.emit("create"),t.children.push(this),this.parent=t,this.transformParentId=0,this.emit("created"),this):this}},{key:"add",value:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.add(arguments[e]);else if(t instanceof Array)for(var n=0;n<t.length;n++)this.add(t[n]);else t&&t.put(this);return this}},{key:"remove",value:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);else if(t instanceof Array)for(var n=0;n<t.length;n++)this.remove(t[n]);else if(t){t.emit("destroy",this);var i=this.children.indexOf(t);this.children.splice(i,1),t.parent=null,t.emit("destroyed",this)}return this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++)this.children[t].emit("destroy",this),this.children[t].parent=null,this.children[t].emit("destroyed",this);return this.children.length=0,this}},{key:"pushTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.visible)return t;if(this.preUpdate&&this.preUpdate(t))return t;this.updateTransform(!1),this._opacity=1==this.opacity?e:this.opacity,t.push(this);for(var n=0,i=this.children.length;n<i;n++)this.children[n].pushTo(t,this._opacity);return t}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x!=t&&(this.position.x=t,this.needUpdateTransform=!0)}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y!=t&&(this.position.y=t,this.needUpdateTransform=!0)}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x!=t&&(this.scale.x=t,this.needUpdateTransform=!0)}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y!=t&&(this.scale.y=t,this.needUpdateTransform=!0)}},{key:"radian",get:function(){return this._radian},set:function(t){t!=this._radian&&(this._radian=t,this.needUpdateTransform=!0)}},{key:"angle",get:function(){return 180*this.radian/Math.PI},set:function(t){var e=t*Math.PI/180;e!=this._radian&&(this._radian=e,this.needUpdateTransform=!0)}}]),e}(ct),mt=function(t){function e(t){var n;return N(this,e),(n=Y(this,V(e).call(this,t))).scenes={},n.needUpdateTransform=!1,n.widthCache={},n.heightCache={},n}return G(e,t),F(e,[{key:"getX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.widthCache[t]||(this.widthCache[t]=this._width*t)}},{key:"getY",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.heightCache[t]||(this.heightCache[t]=this._height*t)}},{key:"set",value:function(t,e){return"[object Function]"==Object.prototype.toString.call(e)&&e.constructor&&(this.scenes[t]=e),this}},{key:"go",value:function(t){var e=Object.prototype.toString.call(t);if("[object String]"==e)this.scenes[t]&&this.clear().add($(this.scenes[t],et(Array.prototype.splice(1))));else if("[object Function]"==e)if(t.constructor)this.clear().add($(t,et(Array.prototype.splice(1))));else{var n=t.apply(void 0,et(Array.prototype.splice(1)));n instanceof yt&&this.clear().add(n)}else"[object Object]"==e&&t instanceof yt&&this.clear().add(t);return this}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.widthCache={}}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.heightCache={}}},{key:"center",get:function(){return this.getX(.5)}},{key:"middle",get:function(){return this.getY(.5)}}]),e}(yt),xt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N(this,e),(t=Y(this,V(e).call(this,n))).morph=n.morph||"Rectangle",t.anchor=new it(n.anchorX||0,n.anchorY||0),t.size=new it(n.width||0,n.height||0),t.staticWidth=!!n.width,t.staticHeight=!!n.height,t.clip=null,t.texture=n.texture,t.invertMatrixId=0,t.invertMatrix=new st,t}return G(e,t),F(e,[{key:"updateTransformInvert",value:function(){this.invertMatrixId!=this.transformId&&(this.invertMatrix.invert(this.matrix),this.invertMatrixId=this.transformId)}},{key:"setClip",value:function(t){return this.clip=[t.x,t.y,t.width,t.height],this.needUpdateClip=!0,this.staticWidth||(this.size.x=t.width),this.staticHeight||(this.size.y=t.height),this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"setAnchor",value:function(t,e){return this.anchorX=t,this.anchorY=e,this}},{key:"setAnchorSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.anchorX=this.width*t,this.anchorY=this.height*e,this}},{key:"checkPoint",value:function(t){return this.updateTransformInvert(),t.multiplyMatrix4(this.invertMatrix),t.x>=-this.width/2&&t.y>=-this.height/2&&t.x<=this.width/2&&t.y<=this.height/2}},{key:"texture",get:function(){return this._texture},set:function(t){(this._texture=t)&&(this.staticWidth||(this.size.x=t.width),this.staticHeight||(this.size.y=t.height))}},{key:"width",set:function(t){this.size.x=t,this.staticWidth=!0},get:function(){return this.size.x}},{key:"height",set:function(t){this.size.y=t,this.staticHeight=!0},get:function(){return this.size.y}},{key:"anchorX",set:function(t){this.anchor.x=t},get:function(){return this.anchor.x}},{key:"anchorY",set:function(t){this.anchor.y=t},get:function(){return this.anchor.y}},{key:"left",get:function(){return-this.size.x/2-this.anchor.x}},{key:"right",get:function(){return this.size.x/2-this.anchor.x}},{key:"top",get:function(){return-this.size.y/2-this.anchor.y}},{key:"bottom",get:function(){return this.size.y/2-this.anchor.y}}]),e}(yt),kt=function(){function t(){N(this,t),this.resources={}}return F(t,[{key:"loads",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=Object.keys(e);return Promise.all(r.map((function(r){var s=t.load(n+r,e[r]);return i?s.then(i):s})))}},{key:"get",value:function(t){return this.resources[t]}}]),t}(),wt=function(){function t(e){N(this,t),this.source=e,this.src=e.src,this.sourceId=0,this.width=0,this.height=0,this.texture=null,this.textureId=0,this.forever=!!this.src,this.optimization=!1,this.update()}return F(t,[{key:"update",value:function(){this.sourceId++,this.width=this.source.width,this.height=this.source.height}},{key:"getContext",value:function(t){return this.context?this.context:this.source&&this.source.getContext?(this.context=this.source.getContext(t),this.context):void 0}}]),t}(),bt=function(t){function e(){return N(this,e),Y(this,V(e).apply(this,arguments))}return G(e,t),F(e,[{key:"load",value:function(t,e){var n=this;return new Promise((function(i,r){var s=new Image;s.onload=function(){return i(n.resources[t]=new wt(s))},s.onerror=r,s.key=s.src=e}))}}]),e}(kt),St=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(N(this,t),!e.src)throw"错误的音频地址";this._src=e.src,this._volume=e.volume||1,this._loop=e.loop||!1,this._muted=e.muted||!1,this._loaded=!1,this._onload=e.onload,this._sounds=[],this.load()}return F(t,[{key:"load",value:function(){var t=this,e=this._sounds.find((function(t){return t.paused}));return e||((e=new Audio).muted=this.muted,e.volume=this.volume,e.loop=this.loop,this._loaded||(e.oncanplay=function(){!t._loaded&&t._onload&&t._onload()}),e.src=this._src,this._sounds.push(e)),e}},{key:"play",value:function(t){void 0!==t&&(this.loop=t);var e=this.load();return e.play().catch((function(){return e.__played=!0})),e}},{key:"pause",value:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t].__played&&(this._sounds[t].__played=!1),this._sounds[t].pause();return this}},{key:"stop",value:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t].__played&&(this._sounds[t].__played=!1),this._sounds[t].pause(),this._sounds[t].currentTime=0;return this}},{key:"destroy",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=t?this._sounds.splice(t):this._sounds,n=0;n<e.length;n++)e[n].destroy&&e[n].destroy();return this}},{key:"check",value:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t].__played||!this._sounds[t].paused?this._sounds[t].play():this._sounds[t].pause()}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop=t;for(var e=0;e<this._sounds.length;e++)this._sounds[e].loop=t}},{key:"volume",get:function(){return this._volume},set:function(t){this._volume=t;for(var e=0;e<this._sounds.length;e++)this._sounds[e].volume=t}},{key:"muted",get:function(){return this._muted},set:function(t){this._muted=t;for(var e=0;e<this._sounds.length;e++)this._sounds[e].muted=t}}]),t}(),Tt=function(t){function e(){var t;return N(this,e),(t=Y(this,V(e).call(this)))._muted=!1,t._volume=1,t}return G(e,t),F(e,[{key:"load",value:function(t,e){var n=this;return new Promise((function(i,r){n.resources[t]=new St({src:e,onload:i})}))}},{key:"play",value:function(t,e){if(this.resources[t])return this.resources[t].play(e)}},{key:"check",value:function(){var t=this;Object.keys(this.resources).forEach((function(e){t.resources[e].check()}))}},{key:"muted",get:function(){return this._muted},set:function(t){var e=this;return this._muted=t,Object.keys(this.resources).forEach((function(n){e.resources[n].muted=t}))}},{key:"volume",get:function(){return this._volume},set:function(t){var e=this;return this._volume=t,Object.keys(this.resources).forEach((function(n){e.resources[n].volume=t}))}}]),e}(kt),_t={Circle:function(t,e){var n=(t.width+t.height)/20|0,i=2*Math.PI/n,r=.5,s=.5,o=.5,a=.5;t.clip&&(r=t.clip[0]/t.texture.width,s=t.clip[1]/t.texture.height,o=t.clip[2]/t.texture.width/2,a=t.clip[3]/t.texture.height/2),e.push(0,0,r,s);for(var u=0;u<=n;u++){var h=u*i,l=Math.cos(h),c=Math.sin(h);e.push(.5*l,.5*c,o*l+r,a*c+s)}},Rectangle:function(t,e){var n=0,i=0,r=1,s=1;t.clip&&(n=t.clip[0]/t.texture.width,i=t.clip[1]/t.texture.height,r=(t.clip[0]+t.clip[2])/t.texture.width,s=(t.clip[1]+t.clip[3])/t.texture.height),e.push(-.5,-.5,n,i,.5,-.5,r,i,-.5,.5,n,s,.5,.5,r,s)}},At={updateRenderMatrix:["transformId","width","height","anchorX","anchorY"],updateVetices:["morph","clip"],updateBlendColor:[],equal:function(t,e,n){return this[t].every((function(t){return e[t]===n[t]}))},set:function(t,e,n){this[t].forEach((function(t){return e[t]=n[t]}))}},Et=function(){function t(e,n){N(this,t),this.compare={},this.vetices=[],this.image=null,this.matrix=new st,this.color=new ut}return F(t,[{key:"updateTexture",value:function(t,e){if(this.image!=e&&(this.image&&!this.image.forever&&(t.deleteTexture(this.image.texture),this.image.texture=null),this.image=e),e){if(e.texture){if(e.textureId==e.sourceId)return;t.bindTexture(t.TEXTURE_2D,e.texture)}else e.texture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),e.optimization&&e.src&&(e.source=null),e.textureId=e.sourceId}}},{key:"updateRenderMatrix",value:function(t,e){At.equal("updateRenderMatrix",this.compare,e)||(this.matrix.setApply(e.matrix),this.matrix.translate(-e.anchorX,-e.anchorY),this.matrix.scale(e.width,e.height),At.set("updateRenderMatrix",this.compare,e))}},{key:"updateVetices",value:function(t,e){this.buffer&&At.equal("updateVetices",this.compare,e)||(this.vetices.length=0,_t[e.morph]?_t[e.morph](e,this.vetices):_t.Rectangle(e,this.vetices),this.bufferLength=this.vetices.length/4,this.drawType=t.TRIANGLE_STRIP,this.buffer||(this.buffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.vetices),t.STATIC_DRAW),At.set("updateVetices",this.compare,e))}},{key:"updateBlendColor",value:function(t,e){this.color.setApply(e.color),1==this.color.alpha&&(this.color.alpha=e.opacity)}},{key:"update",value:function(t,e){this.updateTexture(t,e.texture),this.updateRenderMatrix(t,e),this.updateVetices(t,e),this.updateBlendColor(t,e),this.buffer&&(t.shader.texture(e.texture.texture),t.shader.transform(this.matrix),t.shader.blend(this.color),t.shader.buffer(this.buffer,2,2,0,4),t.drawArrays(this.drawType,0,this.bufferLength))}},{key:"destroy",value:function(t){this.buffer&&(t.deleteBuffer(this.buffer),this.buffer=null),this.updateTexture(t)}}]),t}();function Ct(t,e,n){t.render&&t.render(e,n),t.texture&&(t.builder||n.add(t.builder=new Et(e,t)),t.builder.update(e,t),n.use(t.builder))}var Mt=function(t){function e(){return N(this,e),Y(this,V(e).apply(this,arguments))}return G(e,t),F(e,[{key:"buffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,s=this.gl,o=this.attributes;s.BufferRecord!==t&&(s.BufferRecord=t,s.bindBuffer(s.ARRAY_BUFFER,t),s.vertexAttribPointer(o.aPosition,e,s.FLOAT,!1,(e+n)*r,i*r),s.enableVertexAttribArray(o.aPosition),s.vertexAttribPointer(o.aTextureCoord,n,s.FLOAT,!1,(e+n)*r,(i+e)*r),s.enableVertexAttribArray(o.aTextureCoord))}},{key:"texture",value:function(t){var e=this.gl,n=this.uniforms;e.TextureRecord!==t&&(e.TextureRecord=t,e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(n.uSampler,0))}},{key:"transform",value:function(t){var e=this.gl,n=this.uniforms;e.uniformMatrix4fv(n.uModelMatrix,!1,t.elements||t)}},{key:"blend",value:function(t){var e=this.gl,n=this.uniforms;t?e.uniform4f(n.uColor,t.elements[0],t.elements[1],t.elements[2],t.elements[3]):e.uniform4f(n.uColor,1,1,1,1)}},{key:"vert",get:function(){return["attribute vec4 aPosition;","attribute vec2 aTextureCoord;","uniform mat4 uModelMatrix;","varying vec2 vTextureCoord;","void main()","{","gl_Position = uModelMatrix * aPosition;","vTextureCoord = aTextureCoord;","}"].join("\n")}},{key:"frag",get:function(){return["precision highp float;","uniform sampler2D uSampler;","varying vec2 vTextureCoord;","uniform vec4 uColor;","void main()","{","vec4 color;","color = texture2D(uSampler,vTextureCoord);","gl_FragColor = uColor * color;","}"].join("\n")}}]),e}(function(){function t(e){N(this,t),this.gl=e,this.attributes={},this.uniforms={},this.createProgram(),this.getActiveAttrib(),this.getActiveUniform()}return F(t,[{key:"createShader",value:function(t,e){var n=this.gl,i=n.createShader(n[t]);return n.shaderSource(i,e),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)?i:(n.deleteShader(i),null)}},{key:"getActiveAttrib",value:function(){for(var t=this.gl,e=this.program,n=this.attributes,i=0,r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);i<r;i++){var s=t.getActiveAttrib(e,i),o=n[s.name]=t.getAttribLocation(e,s.name);t.enableVertexAttribArray(o)}}},{key:"getActiveUniform",value:function(){for(var t=this.gl,e=this.program,n=this.uniforms,i=0,r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);i<r;i++){var s=t.getActiveUniform(e,i);n[s.name]=t.getUniformLocation(e,s.name)}}},{key:"createProgram",value:function(){var t=this.gl,e=t.createProgram();if(t.attachShader(e,this.createShader("VERTEX_SHADER",this.vert)),t.attachShader(e,this.createShader("FRAGMENT_SHADER",this.frag)),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw t.deleteProgram(e),t.deleteShader(e),t.deleteShader(e),"链接程序失败";this.program=e}},{key:"vert",get:function(){return""}},{key:"frag",get:function(){return""}}]),t}());H((function(t,e){var n;t.exports=((n=function(){var t=0,e=document.createElement("div");function i(t){return e.appendChild(t.dom),t}function r(n){for(var i=0;i<e.children.length;i++)e.children[i].style.display=i===n?"block":"none";t=n}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",(function(n){n.preventDefault(),r(++t%e.children.length)}),!1);var s=(performance||Date).now(),o=s,a=0,u=i(new n.Panel("FPS","#0ff","#002")),h=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=i(new n.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:e,addPanel:i,showPanel:r,begin:function(){s=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(h.update(t-s,200),o+1e3<=t&&(u.update(1e3*a/(t-o),100),o=t,a=0,l)){var e=performance.memory;l.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){s=this.end()},domElement:e,setMode:r}}).Panel=function(t,e,n){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,u=48*o,h=3*o,l=2*o,c=3*o,f=15*o,d=74*o,p=30*o,v=document.createElement("canvas");v.width=a,v.height=u,v.style.cssText="width:80px;height:48px";var g=v.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,a,u),g.fillStyle=e,g.fillText(t,h,l),g.fillRect(c,f,d,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(c,f,d,p),{dom:v,update:function(u,y){i=Math.min(i,u),r=Math.max(r,u),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,a,f),g.fillStyle=e,g.fillText(s(u)+" "+t+" ("+s(i)+"-"+s(r)+")",h,l),g.drawImage(v,c+o,f,d-o,p,c,f,d-o,p),g.fillRect(c+d-o,f,o,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(c+d-o,f,o,s((1-u/y)*p))}}},n)}));!function(){JSON.parseForce=function(t,e){try{return JSON.parse(t)||e||{}}catch(t){return e||{}}};var t=["零","一","二","三","四","五","六","七","八","九"],e=["","十","百","千","万","\b亿","兆","京","垓","秭","穣","沟","涧","正","载","极"],n={Y:function(t){return t.getFullYear()},m:function(t){return("00"+(t.getMonth()+1)).slice(-2)},d:function(t){return("00"+t.getDate()).slice(-2)},H:function(t){return("00"+t.getHours()).slice(-2)},i:function(t){return("00"+t.getMinutes()).slice(-2)},s:function(t){return("00"+t.getSeconds()).slice(-2)},S:function(t){return("000"+t.getMilliseconds()).slice(-3)},w:function(t){return t.getDay()},W:function(e){return t[n.w(e)]},q:function(t){return(t.getMonth()+3)/3|0},Q:function(e){return t[n.q(e)]}};Date.prototype.format=function(t){var e=this;return t.replace(/[YmdHisSwWqQ]/g,(function(t){return n[t](e)}))},Date.prototype.toWeek=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.setDate(this.getDate()-(n.w(this)||7)+t),this},Date.prototype.oneDay=function(t){return this.format("Ymd")==t.format("Ymd")},Date.prototype.oneWeek=function(t){return new Date(this).toWeek().format("Ymd")==new Date(t).toWeek().format("Ymd")},Number.prototype.chinese=function(){if(this<10)return t[parseInt(this)];for(var n=parseInt(this).toString().split(""),i="",r=3,s=-1,o=!0,a=!1,u=n.length-1;u>=0;u--)if(++s>=4&&(o&&(i=i.substr(1)),r++,s=0,o=!0,a=!1,i=e[r]+i),"0"!==n[u]||!o)if(o=!1,0!=s)if(1!=s||"1"!==n[u]||0!=u)if("0"===n[u]){if(a)continue;i=t[n[u]]+i,a=!0}else i=t[n[u]]+e[s]+i;else i=e[s]+i;else i=t[n[u]]+i;return i}}();var Rt={};Rt.Vector=nt,Rt.Vector2=it,Rt.Vector3=rt,Rt.Matrix4=st,Rt.Event=ct,Rt.Animation=gt,Rt.Container=yt,Rt.Sprite=xt;var Pt={};Pt.canvas=document.createElement("canvas"),Pt.context=Pt.canvas.getContext("webgl"),Pt.render=function(t,e,n){if(!(t instanceof Array))return Ct(t,e,n);for(var i=0;i<t.length;i++)Ct(t[i],e,n)},Pt.dirty=new vt(600),Pt.stage=new mt,Pt.req=z;var Dt=[];Pt.step=function(){Pt.dirty.step(),Pt.render(Pt.stage.pushTo(Dt),Pt.context,Pt.dirty),Pt.dirty.dispose(Pt.context),Dt.length=0},Pt.random=ht,Pt.image=new bt,Pt.audio=new Tt,Pt.touch=new dt,Pt.collision=new lt,document.body.appendChild(Pt.canvas),Pt.clock=new pt,addEventListener("touchend",(function(){return Pt.audio.check()}),{once:!0}),Pt.run=function(t){if(!Pt.run.finish){var e=t.width,n=t.height,i=t.interval;if(n||(n=e/document.body.clientWidth*document.body.clientHeight),Pt.stage.width=e,Pt.stage.height=n,Pt.context.canvas.width=e,Pt.context.canvas.height=n,Pt.touch.size.set(e/document.body.clientWidth,n/document.body.clientHeight),addEventListener("touchstart",(function(t){return Pt.touch.start(t)}),{passive:!0}),addEventListener("touchmove",(function(t){return Pt.touch.move(t)}),{passive:!0}),addEventListener("touchend",(function(t){return Pt.touch.end(t)}),{passive:!0}),addEventListener("touchcancel",(function(t){return Pt.touch.end(t)}),{passive:!0}),!("ontouchstart"in window)){var r=function(t){return{identifier:0,changedTouches:[{clientX:t.clientX,clientY:t.clientY}]}},s=!1;addEventListener("mousedown",(function(t){return s=!0,Pt.touch.start(r(t))}),{passive:!0}),addEventListener("mousemove",(function(t){return s&&Pt.touch.move(r(t))}),{passive:!0}),addEventListener("mouseup",(function(t){return s&&(s=!1,Pt.touch.end(r(t)))}),{passive:!0}),addEventListener("mouseout",(function(t){return s&&(s=!1,Pt.touch.end(r(t)))}),{passive:!0})}Pt.touch.on("touchEnd",(function(t){if(!(t.long>200||t.distance>12)){var e=t.clone().multiplyMatrix4(Pt.stage.matrix);Pt.collision.Recursive(Pt.stage,e)}})),Pt.stage.matrix.setOrtho(0,e,n,0,0,1),Pt.context.viewport(0,0,e,n);var o=Pt.context;o.clearColor(0,0,0,1),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.shader=new Mt(o),o.useProgram(o.shader.program),Pt.clock&&(Pt.clock.on("tick",Pt.step),Pt.clock.run(i||1e3/60)),Pt.run.finish=!0}},Pt.sprite=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&(e.texture=t),"string"==typeof e.texture&&(e.texture=Pt.image.get(e.texture)),new xt(e)};var Ot=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N(this,e),(t=Y(this,V(e).call(this,n))).width=n.width||300,t.height=n.height||150,t.realWidth=n.realWidth||300,t.realHeight=n.realHeight||150,t.maxWidth=Math.min(t.width-t.realWidth,0),t.maxHeight=Math.min(t.height-t.realHeight,0),t}return G(e,t),F(e,[{key:"touchMoveX",value:function(t){var e=this.x;return this.x=Math.min(Math.max(this.x+t,this.maxWidth),0),this.x!=e}},{key:"touchMoveY",value:function(t){var e=this.y;return this.y=Math.min(Math.max(this.y+t,this.maxHeight),0),this.y!=e}}]),e}(yt),Ut=function(t){function e(t){var n;return N(this,e),(n=Y(this,V(e).call(this))).container=t,n.on("create",(function(){Pt.touch.on("touchMove",this.touchMove,this)})),n.on("destroy",(function(){Pt.touch.off("touchMove",this.touchMove,this)})),n.invertMatrix=new st,n.invertMatrixId=0,n}return G(e,t),F(e,[{key:"updateTransformInvert",value:function(){this.invertMatrixId!=this.transformId&&(this.invertMatrix.invert(this.matrix),this.invertMatrixId=this.transformId)}},{key:"checkPoint",value:function(t){return this.updateTransformInvert(),t.multiplyMatrix4(this.invertMatrix),t.x>=0&&t.y>=0&&t.x<=this.container.width&&t.y<=this.container.height}},{key:"touchTap",value:function(t){var e=t.add(this.container.x,-this.container.y).multiplyMatrix4(this.container.matrix);Pt.collision.Recursive(this.container,e)}},{key:"touchMove",value:function(t){var e=t.clone();this.checkPoint(e.multiplyMatrix4(Pt.stage.matrix))&&(this.container.touchMoveX(t.step.x),this.container.touchMoveY(t.step.y))}},{key:"render",value:function(t,e){var n=this.getWorldVector(new rt),i=n.x,r=n.y,s=(i+1)*Pt.stage.width/2,o=(r+1)*Pt.stage.height/2-this.container.height;t.enable(t.SCISSOR_TEST),t.scissor(s,o,this.container.width,this.container.height),Pt.render(this.container.pushTo(),t,e),t.disable(t.SCISSOR_TEST)}}]),e}(yt);Pt.scroll=function(t,e){var n=new Ot(e||{height:300,realHeight:600});return n.add(t),n.parent=new Ut(n),n.parent};var jt=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},It=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,t),this.fillStyle=e.fillStyle||"#FFFFFF",this.strokeStyle=e.strokeStyle||"#000000",this.lineWidth=e.lineWidth||0,this.family=e.family||"icanvas",this.size=e.size||36,this.weight=e.weight||!1,this.align=e.align||"center",this.baseline=e.baseline||"middle",this.wrapWidth=e.wrapWidth||-1,e.lineHeight>0?(this.lineHeight=e.lineHeight,this.autoLineHeight=!1):(this.lineHeight=this.size,this.autoLineHeight=!0),this.icons=e.icons,this.needUpdate=!0}return F(t,[{key:"getAttrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t.family=this.family,t.size=this.size,t.weight=this.weight,t}},{key:"getTags",value:function(t,e){var n={};return t.replace(/\<(fillStyle|strokeStyle|lineWidth|family|weight|size|i)\=(\S+?)\>/g,(function(t,i,r,s){if("i"==i){if(!e[r])return t;n[s]={action:i,arg:e[r],length:t.length-1}}else n[s]={action:i,arg:"@"==r?family[i]:r,length:t.length-1};return t})),n}},{key:"getFamily",value:function(t){return t.size+"px "+t.family+(t.weight?" bold":"")}},{key:"getStructure",value:function(t,e,n,i){e.font=this.getFamily(i);for(var r={width:this.wrapWidth,height:0,contents:[{width:0,height:this.lineHeight,contents:[]}]},s=0,o=t.length;s<o;s++){var a=t[s];if(n[s]){var u=n[s];s+=u.length,"i"!=u.action?(i[u.action]=u.arg,e.font=this.getFamily(i)):this.checkSize(r,u.arg.width,u.arg.height),r.contents[0].contents.push(u)}else if("\n"===a)this.addLine(r);else{var h=e.measureText(a).width;this.checkSize(r,h,i.size),r.contents[0].contents.push({value:a,width:h,height:i.size})}}return r.height+=r.contents[0].height,r.contents[0].width>r.width&&(r.width=r.contents[0].width),r}},{key:"checkSize",value:function(t,e,n){var i=t.contents;this.wrapWidth>=0&&i[0].width+e>this.wrapWidth&&this.addLine(t),this.autoLineHeight&&n>i[0].height&&(i[0].height=n),i[0].width+=e}},{key:"addLine",value:function(t){var e=t.contents;t.height+=e[0].height,e[0].width>t.width&&(t.width=e[0].width),t.contents.unshift({width:0,height:this.lineHeight,contents:[]})}},{key:"compute",value:function(t,e){if(!e)return t.width=t.height=1,void(this.needUpdate=!1);var n=this.getTags(e,this.icons),i=this.getAttrs(),r=this.getStructure(e,t,n,i);this.getAttrs(i),t.canvas.width=r.width,t.canvas.height=r.height,t.font=this.getFamily(i),t.fillStyle=i.fillStyle,t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.textAlign="left",t.textBaseline="top";for(var s=r.width,o=0,a=r.contents.length-1;a>=0;a--){for(var u=r.contents[a],h=u.width,l=u.height,c=u.contents,f=.5*(s-h),d=0;d<c.length;d++){var p=c[d];if(p.value)t.fillText(p.value,f,o+.5*(l-p.height)),f+=p.width;else if("i"==p.action){var v=p.arg,g=o+.5*(l-v.height);t.drawImage(v.source,f,g,v.width,v.height),f+=v.width}else"fillStyle"==p.action||"strokeStyle"==p.action||"lineWidth"==p.action?(i[p.action]=p.arg,t[p.action]=p.arg):(i[p.action]=p.arg,t.font=this.getFamily(i))}o+=l}this.needUpdate=!1}}]),t}(),Bt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(N(this,e),t=Y(this,V(e).call(this,n)),jt(W(t),"refresh",t.preUpdate),!t.texture||!t.texture.getContext)throw"\b\bcanvas纹理不存在";if(!n.text)throw"富文本计算器不存在";return t.text=n.text,t.needUpdateValue=!1,t}return G(e,t),F(e,[{key:"preUpdate",value:function(){(this.needUpdateValue||this.text.needUpdate)&&(this.text.compute(this.texture.getContext("2d"),this.value),this.text.needUpdate=!1,this.needUpdateValue=!1,this.texture.update(),this.width=this.texture.width,this.height=this.texture.height)}},{key:"value",get:function(){return this._value},set:function(t){var e=""+t;e!=this._value&&(this._value=e,this.needUpdateValue=!0)}}]),e}(xt);Pt.text=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.texture=new wt(document.createElement("canvas")),e.text=new It(t);var n=new Bt(e);return n.value=t.value||"",t.value&&n.refresh(),n};var zt=function(t){function e(t){var n,i;return N(this,e),(n=i=Y(this,V(e).call(this)),jt(W(i),"Bar",Pt.sprite("load/bar").setPosition(0,500)),n).add(Pt.sprite("load/cloud"),i.Bar,i.Desc),i.on("loading",(function(t){i.Bar.Progress=t.progress})),t.extend(W(i)),i}return G(e,t),e}(Rt.Container),Nt=function(t){function e(){var t;return N(this,e),t=Y(this,V(e).call(this,{texture:Pt.image.get("play/enemy")})),jt(W(t),"animation",{run:new Rt.Animation(W(t)).to({y:Pt.stage.height,visible:!1},3e3)}),t}return G(e,t),F(e,[{key:"preUpdate",value:function(){this.animation.run.step()}},{key:"Reset",value:function(){return this.x=Pt.random(Pt.stage.width),this.y=0,this.animation.run.play(),this.visible=!0,this}}]),e}(Rt.Sprite),Lt=function(t){function e(){var t,n;N(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=Y(this,(t=V(e)).call.apply(t,[this].concat(r))),jt(W(n),"_Slow",!0),jt(W(n),"Total",1),n}return G(e,t),F(e,[{key:"Collision",value:function(t){for(var e=0,n=0;n<this.children.length;n++){var i=this.children[n];if(i.visible&&(e++,i.y>=Pt.stage.height&&i.Reset(),i.updateTransform(),Pt.collision.InComponent(i,t)))return Pt.stage.go("Home")}e<this.Total&&this.Send()}},{key:"Send",value:function(){var t=this.children.find((function(t){return!t.visible}));t||this.add(t=new Nt),t.animation.run.scale(this.Slow?.1:1),t.Reset()}},{key:"Slow",set:function(t){t?this.children.forEach((function(t){return t.animation.run.scale(.1)})):this.children.forEach((function(t){return t.animation.run.scale(1)})),this._Slow=t},get:function(){return this._Slow}}]),e}(Rt.Container),Ft=function(t){function e(){return N(this,e),Y(this,V(e).call(this,{scaleX:.3,scaleY:.3,texture:Pt.image.get("play/bullet")}))}return G(e,t),F(e,[{key:"preUpdate",value:function(){this.y-=this.parent.Slow?1:10,this.y<0&&(this.visible=!1)}},{key:"Collision",value:function(t){if(this.visible)for(var e=this.getWorldVector(new Rt.Vector2),n=0;n<t.length;n++)if(t[n].visible&&Pt.collision.InComponent(t[n],e))return t[n].visible=!1,this.visible=!1,Pt.audio.get("boom").play(),Pt.stage.children[0].emit("Boom",this.x,this.y)}}]),e}(Rt.Sprite),Ht=function(t){function e(){var t,n;N(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=Y(this,(t=V(e)).call.apply(t,[this].concat(r))),jt(W(n),"Slow",!0),n}return G(e,t),F(e,[{key:"Send",value:function(t,e){var n=this.children.find((function(t){return!t.visible}));n||this.add(n=new Ft),n.x=t,n.y=e-35,n.visible=!0,n.updateTransform(),Pt.audio.get("bullet").play()}},{key:"Collision",value:function(t){for(var e=0;e<this.children.length;e++)this.children[e].Collision(t)}}]),e}(Rt.Container),Xt=function(t){function e(){var t;return N(this,e),t=Y(this,V(e).call(this)),jt(W(t),"Background1",Pt.sprite("play/bg",{width:Pt.stage.width,height:Pt.stage.height,x:Pt.stage.center})),jt(W(t),"Background2",Pt.sprite("play/bg",{width:Pt.stage.width,height:Pt.stage.height,x:Pt.stage.center,y:Pt.stage.height})),t.add(t.Background1,t.Background2),t}return G(e,t),F(e,[{key:"preUpdate",value:function(){this.y++,this.y>=Pt.stage.middle&&(this.y=-Pt.stage.middle)}}]),e}(Rt.Container),Wt=function(t){function e(){var t;return N(this,e),t=Y(this,V(e).call(this,{scaleX:5,scaleY:5})),jt(W(t),"State",20),jt(W(t),"Textures",Array.apply(null,{length:19}).map((function(t,e){return"play/explosion"+(e+1)}))),t}return G(e,t),F(e,[{key:"preUpdate",value:function(){if(this.State>=this.Textures.length)return!0;this.texture=Pt.image.get(this.Textures[this.State]),this.State++}}]),e}(Rt.Sprite),Yt=function(t){function e(){return N(this,e),Y(this,V(e).apply(this,arguments))}return G(e,t),F(e,[{key:"Boom",value:function(t,e){var n=this.children.find((function(t){return t.State>=t.Textures.length}));n||this.add(n=new Wt),n.x=t,n.y=e,n.State=0}}]),e}(Rt.Container),Vt=function(t){function e(){var t,n;return N(this,e),(t=n=Y(this,V(e).call(this)),jt(W(n),"animation",{send:new Rt.Animation(W(n),{scale:.1,repeat:-1}).set({duration:200,call:"SendBullets"}),level:new Rt.Animation(W(n),{scale:.1,repeat:-1}).wait(3e4).call("MoveEnemy")}),jt(W(n),"Background",new Xt),jt(W(n),"Player",Pt.sprite("play/hero",{x:Pt.stage.center,y:Pt.stage.height-200})),jt(W(n),"Enemys",new Lt),jt(W(n),"Bullets",new Ht),jt(W(n),"Booms",new Yt),t).add(n.Background,n.Player,n.Enemys,n.Bullets,n.Booms),n.on("create",(function(){Pt.audio.get("bgm").play(!0),Pt.touch.on("touchStart",this.TouchStart,this),Pt.touch.on("touchMove",this.TouchMove,this),Pt.touch.on("touchEnd",this.TouchEnd,this)})),n.on("destroy",(function(){Pt.audio.get("bgm").stop(),Pt.audio.get("bullet").destroy(),Pt.audio.get("boom").destroy(),Pt.touch.off("touchStart",this.TouchStart,this),Pt.touch.off("touchMove",this.TouchMove,this),Pt.touch.off("touchEnd",this.TouchEnd,this)})),n.on("Boom",n.Booms.Boom,n.Booms),n.TouchEnd(),n.animation.send.play(),n.animation.level.play(),n}return G(e,t),F(e,[{key:"SendBullets",value:function(){this.Bullets.Send(this.Player.x,this.Player.y)}},{key:"MoveEnemy",value:function(){this.Enemys.Total++}}]),F(e,[{key:"preUpdate",value:function(){this.animation.send.step(),this.animation.level.step(),this.Enemys.Collision(this.Player.getWorldVector(new Rt.Vector2(-60,-40))),this.Enemys.Collision(this.Player.getWorldVector(new Rt.Vector2(60,-40))),this.Bullets.Collision(this.Enemys.children)}},{key:"TouchStart",value:function(t){this.animation.send.scale(1),this.animation.level.scale(1),this.Bullets.Slow=!1,this.Enemys.Slow=!1,Pt.collision.InComponent(this.Player,Pt.stage.getWorldVector(t,!0))&&(this.Player.Moving=!0)}},{key:"TouchMove",value:function(t){this.Player.Moving&&(this.Player.x=t.x,this.Player.y=t.y)}},{key:"TouchEnd",value:function(t){this.animation.send.scale(.1),this.animation.level.scale(.1),this.Bullets.Slow=!0,this.Enemys.Slow=!0,this.Player.Moving=!1}}]),e}(Rt.Container),qt=function(t){function e(){var t;N(this,e),t=Y(this,V(e).call(this)),jt(W(t),"Background",Pt.sprite("play/bg").setPosition(Pt.stage.width/2,Pt.stage.height/2).setSize(Pt.stage.width,Pt.stage.height)),jt(W(t),"Play",Pt.sprite("play/Common").setClip(Pt.image.get("play/Common").sprite.button).setSize(200,100).setPosition(-200,-100)),jt(W(t),"Rank",Pt.sprite("play/Common",{opacity:.5}).setClip(Pt.image.get("play/Common").sprite.button).setSize(200,100).setPosition(200,-100)),jt(W(t),"Share",Pt.sprite("play/Common",{alpha:.5}).setClip(Pt.image.get("play/Common").sprite.button).setSize(200,100).setPosition(-200,100)),jt(W(t),"Audio",Pt.sprite("play/Common").setClip(Pt.image.get("play/Common").sprite.button).setSize(200,100).setPosition(200,100)),Pt.text({fillStyle:"#ff0000",icons:{s:Pt.image.get("load/shadow")},value:"开始游戏<i=s>\n富文<size=16>本<i=s>测<fillStyle=#FFFFFF>试"}).put(t.Play),t.Play.touchTap=function(){Pt.stage.go(new Vt)},Pt.text({size:20,fillStyle:"#00ff00",value:"排行榜"}).put(t.Rank),t.Rank.touchTap=function(){},Pt.text({size:36,fillStyle:"#00ff00",value:"分享"}).put(t.Share),t.Share.touchTap=function(){};var n=Pt.text({size:26,value:Pt.audio.muted?"声音:关":"声音:开"}).put(t.Audio);t.Audio.touchTap=function(){return Pt.audio.muted=!Pt.audio.muted,n.value=Pt.audio.muted?"声音:关":"声音:开","refresh"},t.add(t.Background),t.Background.add(t.Play,t.Rank,t.Share,t.Audio);var i=Pt.sprite("play/Common").setClip(Pt.image.get("play/Common").sprite.button).setSize(200,100).setPosition(0,300);i.touchTap=function(t){};var r=Pt.scroll(i).setPosition(100,100),s=new Rt.Container({x:100,y:100});return s.add(r),t.add(s),t.touchTap=function(){s.x+=100},t.on("create",(function(){Pt.audio.get("home").play(!0)})),t.on("destroy",(function(){Pt.audio.get("home").stop()})),t}return G(e,t),e}(Rt.Container),Gt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";N(this,t),jt(this,"Name","default_default"),jt(this,"Data",null),this.Name=e+"_"+n}return F(t,[{key:"Get",value:function(t){return void 0===t?this.Data:this.Data?this.Data[t]:void 0}},{key:"Set",value:function(t,e){return this.Data&&(this.Data[t]=e),this}},{key:"Add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.Data[t]+=e,this}},{key:"GetString",value:function(){return JSON.stringify(this.Data)}},{key:"SetString",value:function(t){try{this.Data=JSON.parse(t)}catch(t){this.Data=null}return this}},{key:"Execute",value:function(t){var e=t.call(this,this.Data);return e&&(this.Data=e),this}},{key:"SetStorage",value:function(){var t,e,n=this;return(t=this.Name,e=this.GetString(),window.localStorage.setItem(t,e),Promise.resolve()).then((function(){return n.Data}))}},{key:"GetStorage",value:function(t){var e,n=this;return(e=this.Name,Promise.resolve({data:window.localStorage.getItem(e)})).catch((function(t){return t})).then((function(e){return n.SetString(e.data,t)}))}},{key:"DelStorage",value:function(){var t,e=this;return(t=this.Name,window.localStorage.removeItem(t),Promise.resolve()).then((function(){return e.SetString()}))}}]),t}(),Jt=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;if(N(this,e),n=Y(this,V(e).call(this,t,i)),jt(W(n),"Data",[]),r){var s=r instanceof Gt?r.Data:r;s&&n.Merge(s)}return n}return G(e,t),F(e,[{key:"Merge",value:function(t){return this.Data=this.Data.concat(t),this}},{key:"MergeTo",value:function(t){return t.concat(this.Data)}},{key:"SetString",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.Data;return K(V(e.prototype),"SetString",this).call(this,t),!this.Data instanceof Array&&(this.Data=[]),n&&(this.Data=i.concat(this.Data)),this}},{key:"Insert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return-1==e?this.Data.push(t):0==e?this.Data.unshift(t):this.Data.splice(e,0,t),this}},{key:"length",get:function(){return this.Data.length}},{key:"keys",get:function(){return Object.keys(this.Data)}}]),e}(Gt),Kt=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;if(N(this,e),n=Y(this,V(e).call(this,t,i)),jt(W(n),"Data",{}),r){var s=r instanceof Gt?r.Data:r;s&&n.Merge(s)}return n}return G(e,t),F(e,[{key:"MergeTo",value:function(t){return Object.assign(t,this.Data)}},{key:"Merge",value:function(t){return this.Data=Object.assign(this.Data||{},t||{}),this}},{key:"SetString",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.Data;return K(V(e.prototype),"SetString",this).call(this,t),"object"!=X(this.Data)&&(this.Data={}),n&&(this.Data=Object.assign(i,this.Data)),this}}]),e}(Gt),$t=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";N(this,t),jt(this,"Name","default"),jt(this,"Data",{}),this.Name=e}return F(t,[{key:"Map",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.Data[t]instanceof Kt||(this.Data[t]=new Kt(this.Name,t,this.Data[t])),this.Data[t]}},{key:"Arr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.Data[t]instanceof Jt||(this.Data[t]=new Jt(this.Name,t,this.Data[t])),this.Data[t]}},{key:"Table",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.Data[t]||(this.Data[t]=new Gt(this.Name,t)),this.Data[t]}},{key:"MergeMap",value:function(t,e){return this.Map(t).Merge(e)}},{key:"MergeArr",value:function(t,e){return this.Arr(t).Merge(e)}},{key:"GetString",value:function(){for(var t=arguments.length?arguments:Object.keys(this.Data),e={},n=0;n<t.length;n++)e[t[n]]=this.Data[t[n]].GetString();return JSON.stringify(e)}},{key:"SetString",value:function(t){var e=this;try{t=JSON.parse(t)}catch(t){return this}return Object.keys(t).forEach((function(n){e.Data[n]=e.Table(n).SetString(t[n])})),this}}]),t}();var Qt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return N(this,e),(t=Y(this,V(e).call(this))).name=n,t.full=i||0,t.current=r,t}return G(e,t),F(e,[{key:"progress",get:function(){return this._full?this._current/this._full:1}}]),F(e,[{key:"full",set:function(t){this._full=t,this.emit("loading")}},{key:"current",set:function(t){this._current=t,this.emit("loading")},get:function(){return this._current}}]),e}(Rt.Event),Zt=function(t){function e(){var t;return N(this,e),(t=Y(this,V(e).call(this))).loading=null,t.progresses=[],t}return G(e,t),F(e,[{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.progresses.length,r=new Qt(t,e,n);return this.progresses.push(r),this.tagNext(i),r}},{key:"tagNext",value:function(t){var e=this;if(this.loading)return this.loading.emit("loading");for(var n=function(t){var n=e.progresses[t];if(n.finish)return"continue";e.loading=n,n.on("loading",(function(){return e.emit("loading",n)})),n.once("finish",(function(){e.loading=null,n.finish=!0,n.off("loading"),e.tagNext(t)}))},i=t;i<this.progresses.length;i++)n(i)}},{key:"extendLoading",value:function(t){this.emit("loading",t)}},{key:"extend",value:function(t){var e=this;this.on("loading",this.extendLoading,t),t.once("destroy",(function(){return e.off("loading",e.extendLoading,t)})),this.loading&&this.loading.emit("loading",this.loading)}},{key:"destroy",value:function(){this.off("loading"),this.loading=null,this.progresses.length=0,this.emit("finish")}}]),e}(Rt.Event);function te(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,r={};return Object.keys(t).forEach((function(s){if("_"==s){if(-1==i.indexOf(t[s]))return;var o=n.slice(0,-1),a=e+n.slice(0,-1)+"."+t[s];r[o]=a}else if("string"==typeof t[s]){if(-1==i.indexOf(t[s]))return;var u=n+s,h=e+n+s+"."+t[s];r[u]=h}else Object.assign(r,te(t[s],e,n+s+"/",i))})),r}Pt.stage.set("Load",zt),Pt.stage.set("Home",qt),Pt.data=new $t("global_production"),Pt.data.Map("Setting").Merge({Audio:!0,Shock:!0}),Pt.run({width:750,interval:1e3/60});var ee=new Zt;Promise.all([Promise.all([Pt.image.loads(te({load:{bar:"png",cloud:"png",shadow:"png",shadowpx:"png"},share:"png"},"resource/local/","",["png","jpg"])),Pt.data.Map("Setting").GetStorage(!0).then((function(){return Pt.audio.muted=!Pt.data.Map("Setting").Get("Audio")}))]).then((function(){return Pt.stage.go(new zt(ee))})),Promise.resolve(ee.add("资源包下载",100)).then((function(t){return e="resource/remote",function(e){return t.current=e}(100),Promise.resolve({assetsUrl:e,resourceMap:{audio:{bgm:"mp3",boom:"mp3",bullet:"mp3",home:"mp3"},modal:{add:"png",close:"png",title:"png"},play:{Common:"png",bg:"jpg",bullet:"png",enemy:"png",explosion1:"png",explosion10:"png",explosion11:"png",explosion12:"png",explosion13:"png",explosion14:"png",explosion15:"png",explosion16:"png",explosion17:"png",explosion18:"png",explosion19:"png",explosion2:"png",explosion3:"png",explosion4:"png",explosion5:"png",explosion6:"png",explosion7:"png",explosion8:"png",explosion9:"png",hero:"png"}}});var e})).then((function(t){var e=te(t.resourceMap,t.assetsUrl+"/","",["png","jpg"]),n=ee.add("图片预读",Object.keys(e).length),i=te(t.resourceMap.audio,t.assetsUrl+"/audio/","",["mp3"]),r=ee.add("音频加载",Object.keys(i).length);return Promise.all([Pt.image.loads(e,"",(function(){return n.current++})),Pt.audio.loads(i,"",(function(){return r.current++}))])})).then((function(){Pt.image.get("play/Common").sprite={button:{x:121,y:7.3,width:37,height:21.7}}}))]).then((function(){return ee.destroy()})).then((function(){return Pt.stage.go("Home")})).catch((function(t){}))}();
